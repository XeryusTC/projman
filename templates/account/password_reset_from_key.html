{% extends "account/base.html" %}

{% load i18n %}
{% block head_title %}{% trans "Change Password" %}{% endblock %}

{% block title %}
{% if token_fail %}
	{% trans "Bad Token" %}
{% else %}
	{% trans "Change Password" %}
{% endif %}
{% endblock title %}

{% block page_content %}
{% if token_fail %}
	{% url 'account_reset_password' as passwd_reset_url %}
	{% blocktrans %}The password reset link was invalid, possibly because it
	has already been used.  Please request a <a href="{{ passwd_reset_url }}">
		new password reset</a>.{% endblocktrans %}
{% else %}
	{% if form %}
		<form method="POST" action=".">
		{% csrf_token %}

		{% for error in form.non_field_errors %}
			<div class="mui-row">
				<div class="mui-col-xs-12 mui--text-danger">{{ error }}</div>
			</div>
		{% endfor %}

		{% if form.password1.errors %}
			<div class="mui-row">
				<div class="mui-col-xs-12 mui--text-danger mui--list--inline">
					{{ form.password1.errors }}
				</div>
			</div>
		{% endif %}
		<div class="mui-row">
			<div class="mui-col-xs-12">
				<div class="mui-textfield mui-textfield--float-label">
					{{ form.password1 }}
					{{ form.password1.label_tag }}
				</div>
			</div>
		</div>

		{% if form.password2.errors %}
			<div class="mui-row">
				<div class="mui-col-xs-12 mui--text-danger mui--list--inline">
					{{ form.password2.errors }}
				</div>
			</div>
		{% endif %}
		<div class="mui-row">
			<div class="mui-col-xs-12">
				<div class="mui-textfield mui-textfield--float-label">
					{{ form.password2 }}
					{{ form.password2.label_tag }}
				</div>
			</div>
		</div>
		
		<div class="mui-row">
			<div class="mui-col-xs-12 mui--text-right">
				<input class="mui-btn mui-btn--primary" type="submit"
					name="action" value="{% trans 'Change Password' %}" />
			</div>
		</div>
	</form>
	{% else %}
		{% trans 'Your password is now changed.' %}
	{% endif %}
{% endif %}
{% endblock %}
